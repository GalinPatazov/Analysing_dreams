{% load static %}
{% load i18n %}  <!-- Add this for translation tags -->

<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">  <!-- Dynamically set language -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% trans "Dream AI" %}{% endblock %}</title>

    <link rel="stylesheet" href="{% static 'dreams_app/style.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <header class="main-header">
        <div class="container">
            <nav class="navbar">
                <div class="logo">
                    <a href="{% url 'home' %}">âœ¨ {% trans "Dream" %}<span>{% trans "AI" %}</span></a>
                </div>
                <div class="nav-links">
                    <a href="{% url 'home' %}" class="nav-link">{% trans "Home" %}</a>

                    {% if user.is_authenticated %}
                        <a href="{% url 'dashboard' %}" class="nav-link">{% trans "Dashboard" %}</a>
                        <a href="{% url 'dreams_app:my_dreams' %}" class="nav-link">{% trans "My Dreams" %}</a>
                        <a href="{% url 'dreams_app:favorites' %}" class="nav-link">{% trans "Favorites" %}</a>
                        <div class="user-menu">
                            <span class="username">{% trans "Hi" %}, {{ user.username }}</span>
                            <a href="{% url 'logout' %}" class="btn btn-outline">{% trans "Logout" %}</a>
                        </div>
                    {% else %}
                        <a href="{% url 'login' %}" class="nav-link">{% trans "Login" %}</a>
                        <a href="{% url 'register' %}" class="btn btn-primary">{% trans "Sign Up" %}</a>
                    {% endif %}
                
<!-- Add this form for the language switcher -->
<form action="{% url 'set_language' %}" method="post" class="language-switcher">
    {% csrf_token %}
    <select name="language" onchange="this.form.submit()">
        {% get_current_language as LANGUAGE_CODE %}
        {% get_available_languages as LANGUAGES %}
        {% for lang in LANGUAGES %}
            <option value="{{ lang.0 }}" {% if lang.0 == LANGUAGE_CODE %}selected{% endif %}>
                {{ lang.1 }}
            </option>
        {% endfor %}
    </select>
</form>
</div>
            </nav>
        </div>
    </header>

    <main class="container">
        {% block content %}
        {% endblock %}
    </main>

    <footer class="main-footer">
        <div class="container">
            <p>{% trans "Dream AI" %} &copy; 2026. {% trans "Unlock the mysteries of your subconscious." %}</p>
        </div>
    </footer>
</body>
</html>