{% extends 'base.html' %}

{% block title %}My Favorites{% endblock %}

{% block content %}
<div class="card">
    <h1>‚≠ê My Favorite Dreams</h1>

    {% if favorites %}
        <div class="dream-list">
            {% for fav in favorites %}
                <div class="dream-item">
                    <h3>{{ fav.dream.name }}</h3>
                    <div class="dream-meta">
                        <span>üìÖ Dream Date: {{ fav.dream.created_at|date:"F j, Y" }}</span>
                        <span>‚≠ê Favorited: {{ fav.created_at|date:"F j, Y" }}</span>
                    </div>

                    {% if fav.dream.analysis_text %}
                        <p>{{ fav.dream.analysis_text|truncatewords:30 }}</p>
                    {% endif %}

                    <div class="dream-actions">
                        <a href="{% url 'dreams_app:detail' fav.dream.id %}" class="btn btn-primary">View Dream</a>
                        <a href="{% url 'dreams_app:toggle_favorite' fav.dream.id %}" class="btn btn-danger">Remove Favorite</a>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="text-center mt-3">
            <p class="mb-2">You haven't favorited any dreams yet.</p>
            <p>Start by exploring your dreams and clicking the ‚≠ê button!</p>
        </div>
    {% endif %}

    <div class="mt-3">
        <a href="{% url 'dreams_app:my_dreams' %}" class="btn btn-outline">‚Üê Back to My Dreams</a>
    </div>
</div>
{% endblock %}